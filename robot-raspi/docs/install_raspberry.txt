# Activer le SSH sur le Raspberry Pi (Préférences / Configuration)

# Connexion en ssh
ssh pi@192.168.1.20

# Copier le ZIP contenant les dossiers et fichiers nécessaire au robot
scp installation/Robot.zip   pi@192.168.1.20:~/
unzip Robot.zip
rm Robot.zip


# Installation du JDK (voir SDKMan en dessous)
sudo apt update
sudo apt-get --assume-yes install default-jdk

# Installation du JDK avec SDK Man (https://sdkman.io/install)
curl -s "https://get.sdkman.io" | bash
source "$HOME/.sdkman/bin/sdkman-init.sh"
sdk version
sdk install java 11.XX

# Phidgets
cd ~/Robot/third-party/phidgets/
sudo apt-get update
sudo apt install curl
curl -fsSL https://www.phidgets.com/downloads/setup_linux | sudo -E bash - &&\
sudo apt-get install -y libphidget22-dev
sudo apt-get install -y libphidget22java

#REGLES UDEV
sudo cp ~/Robot/third-party/phidgets/99-libphidget22.rules /etc/udev/rules.d

#TESTS
cd ~/Robot/third-party/phidgets/
mkdir tests
cd tests/
wget https://www.phidgets.com/downloads/phidget22/examples/c/Manager/Phidget22_HelloWorld_C_Ex.zip
unzip Phidget22_HelloWorld_C_Ex.zip
cd HelloWorld_Example/
gcc HelloWorld.c -o HelloWorld -lphidget22
./HelloWorld

#TESTS JAVA
cd ~/Robot/third-party/phidgets/
mkdir tests_java
cd tests_java/
wget https://www.phidgets.com/downloads/phidget22/examples/java/RCServo/Phidget22_RCServo_Java_Ex.zip
unzip Phidget22_RCServo_Java_Ex.zip
wget https://www.phidgets.com/downloads/phidget22/libraries/any/Phidget22Java.zip
unzip Phidget22Java.zip
javac -classpath .:phidget22.jar RCServoExample.java
java -classpath .:phidget22.jar RCServoExample

# Installation Webcam
sudo apt-get install libjpeg8

# Outil permettant de trouver la webcam
sudo apt-get --assume-yes install v4l-utils

# Respeaker (droits sur USB de la carte)
sudo cp ~/Robot/third-party/respeaker/60-respeaker.rules /etc/udev/rules.d

# Sox pour synthèse vocale
sudo apt-get --assume-yes install sox

# Manette PS3 (https://pimylifeup.com/raspberry-pi-playstation-controllers/)
# Marche pas du premier coup mais passe en branchant et débranchant par USB
sudo apt-get --assume-yes install libusb-dev
cd ~/Robot/third-party/sixpair
wget http://www.pabr.org/sixlinux/sixpair.c
gcc -o sixpair sixpair.c -lusb
sudo ~/Robot/third-party/sixpair/sixpair
sudo bluetoothctl
scan on
agent on
default-agent
connect YOUR_MAC_ADDRESS
trust YOUR_MAC_ADDRESS
quit
sudo reboot

# Copier le fichier JSON des credentials Google

# Installation de Python (https://medium.com/@ageitgey/build-a-face-recognition-system-for-60-with-the-new-nvidia-jetson-nano-2gb-and-python-46edbddd7264)
# voir pour installer dlib avec support CUDA
sudo apt-get update
sudo apt-get install python3-pip cmake libopenblas-dev liblapack-dev libjpeg-dev
sudo pip3 -v install Cython face_recognition
pip3 install grpcio
pip3 install scikit-build
pip3 install -v opencv-python



pip3 install cython
pip3 install numpy==1.19.4
pip3 install pandas
pip3 install cmake
pip3 install face-recognition
pip3 install flask
pip3 install opencv-python

# Copier le fichier des poids de YOLOV3 dans Robot/Programme/reconnaissance-visage/python-server/object/cfg
# https://drive.google.com/file/d/1nw89NSkdleX_rfaKWZ3-WLigeUfF32Zp/view?usp=sharing





